%head
  %meta{:charset => "utf-8"}/
  %title Luc J. Bourhis Musings - #{@item[:title]}
  %link{:rel => "stylesheet", :href => "#{@items['/stylesheet.*'].path}"}/

  -# you don't need to keep this, but it's cool for stats!
  %meta{:name => "generator", :content => "nanoc #{Nanoc::VERSION}"}/
  %script{:type => "text/x-mathjax-config"}
    :plain
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$']],
          displayMath: [['$$', '$$']],
        },
        TeX: {
          equationNumbers: {
            autoNumber: "AMS"
          },
          Macros: {
            #{macros_for_mathjax}
          }
        },
        menuSettings: {
          zoom: "Double-Click"
        },
      });
  %script{:src => 'https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML'}

%body
  -# define the theorem-like DSL so that ERB can later interpret it
  - render "/#{language}/theorem-like.erb"
  #main
    #{yield}
    #{render "/bibliography.*"}
  #sidebar
    %a{:href => "/fr/"}
      %img{:src => "/fr/icon.png"}
    %a{:href => "/en/"}
      %img{:src => "/en/icon.png"}
    .whoami= render "/#{language}/side_header.*"

    - sidebar_tree(language).each do |key, entries|
      .topics= key
      %ul.title-list
        - entries.each do |e|
          %li.title= link_to(e[:title], e)
